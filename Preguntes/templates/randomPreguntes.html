{% extends "base.html" %}
{% load staticfiles %}


{% block  title %}Llistat de temes{% endblock %}

{% block localitzacio %}
		<li>
			<a href="{% url 'preguntes:ferPreguntes' %}">Preguntes</a>
		</li>
		
		<li>
			<a class="active">Preguntes aleatories</a>
		</li>
{% endblock %}

{% block content %} 
<h1>Preguntes aleatories</h1>
<br>
{% if preguntes %}
<div class="container">
	<div  class="row">

		<ul>
			{% for pregunta in preguntes %}

			<div id="taulaResultats{{pregunta.id}}" class=" taulaResultats  table-responsive">
				<table class=" table-bordered table  col-md-3 table-condensed">
					<tr class="info">
						<td>Nota mitjana de la pr√†ctica: </td><td id="nota{{pregunta.id}}"></td>
					</tr>
					<tr  class="success">
						<td>Respostes Correctes: </td><td id="correctes{{pregunta.id}}"></td>
					</tr>
					<tr class="danger">
						<td>Respostes Incorrectes: </td><td id="incorrectes{{pregunta.id}}"></td>
					</tr>
				</table>
			</div>

			<div id="{{pregunta.id}}"  class="list-group col-md-9">
				<p class='list-group-item-info list-group-item'>
					<span class="col-md-4">Emplena els buits amb {{ pregunta.tema }}</span>
					<span class="btn-group col-md-offset-1">
						<button onclick="validarPreguntes({{pregunta.id}})" id="valid{{pregunta.id}}" class="btn col-md-offset-2 btn-sm btn-info butonet  validarPreguntes" value="Validar Pregunta" >
							Validar Pregunta
						</button> {%if medalles %}
						{%for m in medalles %}
						{% if 'ReportarPregunta' == m.medalla.nomMedalla %}
						<button onclick="marcarIncorrecte({{pregunta.id}})" id="repor{{pregunta.id}}"  class="btn butonet col-md-offset-1 btn-sm btn-warning" value="Reportar Pregunta Incorrecte ">
							Reportar Pregunta Incorrecte
						</button> 
						{%endif%}
						{%endfor%}
						{%endif%} <span class="twitter" id="twitter{{pregunta.id}}"><a href="https://twitter.com/intent/tweet?button_hashtag=PreguntMatic&text=He%20contestat%20una%20pregunta%20sobre%20{{pregunta.tema}}%20a%20" class=" twitter-hashtag-button" data-lang="es" data-related="juli16_31">Tweet #PreguntMatic</a>
							<script>
								! function(d, s, id) {
									var js, fjs = d.getElementsByTagName(s)[0], p = /^http:/.test(d.location) ? 'http' : 'https';
									if (!d.getElementById(id)) {
										js = d.createElement(s);
										js.id = id;
										js.src = p + '://platform.twitter.com/widgets.js';
										fjs.parentNode.insertBefore(js, fjs);
									}
								}(document, 'script', 'twitter-wjs');
							</script> </span> </span>

				</p>
				<p class="preguntes list-group-item text-justify"  >
					{{ pregunta.toHTML }}
				</p>

			</div>
			{% endfor %}

		</ul>
		
		<div class="col-md-offset-2 col-md-8">
	<div class="pagination">
		{% if preguntes.has_previous %} <li><a href="?pagina={{ preguntes.previous_page_number }}">&laquo;</a></li>
		{% else %} <li class="disabled"> <a>&laquo;</a> </li>
		{% endif %}

		{% for i in preguntes.paginator.page_range %}
		{% ifequal i preguntes.number %} <li class="active"> <a href="?pagina={{ i }}">{{ i }}</a></li>
		{% else %}<li> <a href="?pagina={{ i }}">{{ i }}</a></li>
		{% endifequal %}
		{% endfor %}

		{% if preguntes.has_next %}<li><a href="?pagina={{ preguntes.next_page_number }}">&raquo;</a></li>
		{% else %}<li class="disabled"><a>&raquo;</a></li>
		{% endif %}
		</div>
		</div>
		
	</div>
</div>
{% else %}
<p class="col-md-5 col-md-offset-3 text-center">
	En aquest moment no disposem de cap pregunta d'aquest tema.<br>
	<strong>Ets professor? Crea'n alguna!</strong><br><br>
	<a href="{% url 'preguntes:crearPregunta' %}">
		<button class="btn btn-info">
			Crear Pregunta!
		</button>
		</a>
</p>
{% endif %} {% endblock %}